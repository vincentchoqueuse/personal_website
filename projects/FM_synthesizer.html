
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>STM32 FM Synthesizer &#8212; personal website  documentation</title>
<script>
  document.documentElement.dataset.mode = localStorage.getItem("mode") || "light";
  document.documentElement.dataset.theme = localStorage.getItem("theme") || "light"
</script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=92025949c220c2e29695" rel="stylesheet">
<link href="../_static/styles/pydata-sphinx-theme.css?digest=92025949c220c2e29695" rel="stylesheet">


  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/plot_directive.css" />
    <link rel="stylesheet" type="text/css" href="../_static/css/custom.css" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695">

    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../_static/doctools.js"></script>
    <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="author" title="About these documents" href="../about.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Cheatsheet" href="../cheatsheet/index.html" />
    <link rel="prev" title="Projects" href="index.html" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta name="docsearch:language" content="en">
  </head>
  
  
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="180" data-default-mode="light">
    <div class="bd-header-announcement container-fluid" id="banner">
      

    </div>

    
    <nav class="bd-header navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="bd-header__inner container-xl">

  <div id="navbar-start">
    
    
  


<a class="navbar-brand logo" href="../index.html">
  
  
  
  
    <img src="../_static/logo.svg" class="logo__image only-light" alt="Logo image">
    <img src="../_static/logo.svg" class="logo__image only-dark" alt="Logo image">
  
  
</a>
    
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-collapsible" aria-controls="navbar-collapsible" aria-expanded="false" aria-label="Toggle navigation">
    <span class="fas fa-bars"></span>
  </button>

  
  <div id="navbar-collapsible" class="col-lg-9 collapse navbar-collapse">
    <div id="navbar-center" class="mr-auto">
      
      <div class="navbar-center-item">
        <ul id="navbar-main-elements" class="navbar-nav">
    <li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../courses/index.html">
  Courses
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../research/index.html">
  Research
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../tutorials/index.html">
  Tutorials
 </a>
</li>

<li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Projects
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../cheatsheet/index.html">
  Cheatsheet
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../about.html">
  About Me
 </a>
</li>

    
</ul>
      </div>
      
    </div>

    <div id="navbar-end">
      
      <div class="navbar-end-item">
        <span id="theme-switch" class="btn btn-sm btn-outline-primary navbar-btn rounded-circle">
    <a class="theme-switch" data-mode="light"><i class="fas fa-sun"></i></a>
    <a class="theme-switch" data-mode="dark"><i class="far fa-moon"></i></a>
    <a class="theme-switch" data-mode="auto"><i class="fas fa-adjust"></i></a>
</span>
      </div>
      
      <div class="navbar-end-item">
        <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://www.linkedin.com/in/vincent-choqueuse-388a5720/" rel="noopener" target="_blank" title="Linkedin"><span><i class="fab fa-linkedin"></i></span>
            <label class="sr-only">Linkedin</label></a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/vincentchoqueuse/" rel="noopener" target="_blank" title="GitHub"><span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
      </ul>
      </div>
      
    </div>
  </div>
</div>
    </nav>
    

    <div class="bd-container container-xl">
      <div class="bd-container__inner row">
          

<!-- Only show if we have sidebars configured, else just a small margin  -->
<div class="bd-sidebar-primary col-12 col-md-3 bd-sidebar">
  <div class="sidebar-start-items"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Contents:
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active">
  <a class="current reference internal" href="#">
   STM32 FM Synthesizer
  </a>
 </li>
</ul>

  </div>
</nav>
  </div>
  <div class="sidebar-end-items">
  </div>
</div>


          


<div class="bd-sidebar-secondary d-none d-xl-block col-xl-2 bd-toc">
  
    
    <div class="toc-item">
      
<div class="tocsection onthispage mt-5 pt-1 pb-3">
    <i class="fas fa-list"></i> On this page
</div>

<nav id="bd-toc-nav">
    <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#context">
   Context
  </a>
  <ul class="visible nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#specifications">
     Specifications
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#methodology">
   Methodology
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#references">
   References
  </a>
 </li>
</ul>

</nav>
    </div>
    
    <div class="toc-item">
      
    </div>
    
  
</div>


          
          
          <div class="bd-content col-12 col-md-9 col-xl-7">
              
              <article class="bd-article" role="main">
                
  <section id="stm32-fm-synthesizer">
<h1>STM32 FM Synthesizer<a class="headerlink" href="#stm32-fm-synthesizer" title="Permalink to this heading">#</a></h1>
<p>The goal of this project is to implement a FM (Frequency Modulation) sound synthesizer using the STM32F4 Discovery and/or the STM32L476G Discovery</p>
<section id="context">
<h2>Context<a class="headerlink" href="#context" title="Permalink to this heading">#</a></h2>
<p>The foundation of the FM synthesis has been patented by John Chowning at Stanford University in 1974 (see <a class="reference external" href="https://patents.google.com/patent/US4018121A/en">Patent</a> )
One of the most famous synthesizer using this technique is the Yamaha DX7, that was manufactured by the Yamaha Corporation from 1983 to 1989. The DX7 is one of the best-selling synthesizers in history, selling more than 200,000 units.</p>
<img alt="The DX7 Synthesizer" src="../_images/DX7.jpg" />
<section id="specifications">
<h3>Specifications<a class="headerlink" href="#specifications" title="Permalink to this heading">#</a></h3>
<ul class="simple">
<li><p>Six phase-modulated oscillators :</p></li>
</ul>
<div class="math notranslate nohighlight">
\[x_p(t) = a_p \sin(2\pi f_p t + \varphi_p + I_p x_q(t) )\]</div>
<p>In musical application, this signal model has the advantage of generating complex sounds. While the
addition of two sine waves only contains 4 frequency components (positive and negative frequencies), a FM modulated sine wave can generate
many frequency components whose amplitudes are determined by Bessel functions.</p>
<ul class="simple">
<li><p>Oscillators can be combined in different ways (32 algorithms). Each algorithm specify is an oscillator acts like a carrier or modulated signal.</p></li>
</ul>
<img alt="The DX7 Algorithms" src="../_images/DX7_algorithms.jpg" />
<ul class="simple">
<li><p>Seven 6-points envelopes (one for each sine and one for the pitch)</p></li>
</ul>
<figure class="align-default">
<img alt="../_images/FM_synthesizer-1.png" class="plot-directive" src="../_images/FM_synthesizer-1.png" />
</figure>
</section>
</section>
<section id="methodology">
<h2>Methodology<a class="headerlink" href="#methodology" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><dl class="simple">
<dt>Communication between a MIDI keyboard and one of the USB port of the STM32F4</dt><dd><ul>
<li><p>Extraction of the note ON / note OFF messages</p></li>
<li><p>Extraction of the Control Change messages.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Implementation of the sound synthesizer</dt><dd><ul>
<li><p>Generation of a sine wave oscillator, implementation of phase modulation,</p></li>
<li><p>Generation of the signal enveloppe (see <a class="reference external" href="https://youtu.be/Awju9PI8Spc?t=368">Video</a> ),</p></li>
<li><p>Implementation of the 32 DX7 algorithms.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>Implementation of some presets</dt><dd><ul>
<li><p>Reverse engineering of some classical DX7 presets (pad sounds, bass sounds, rhodes sounds).</p></li>
<li><p>Integration of preset selection features (communications ? Midi message ?)</p></li>
<li><p>(Create a simple app to easily edit the DX7 parameters.)</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</section>
<section id="references">
<h2>References<a class="headerlink" href="#references" title="Permalink to this heading">#</a></h2>
<ul class="simple">
<li><p>A sound synthesizer STM32 project: <a class="reference external" href="https://github.com/MrBlueXav/Dekrispator_v2">https://github.com/MrBlueXav/Dekrispator_v2</a></p></li>
<li><p>DX7 Manual: <a class="reference external" href="http://dxsysex.com/doc/DX7SE.pdf">http://dxsysex.com/doc/DX7SE.pdf</a></p></li>
<li><p>Origin of the DX7 and FM Synthesis: <a class="reference external" href="https://youtu.be/sXt_NXjc7oY">https://youtu.be/sXt_NXjc7oY</a></p></li>
<li><p>List of classical super Kitch DX7 presets: <a class="reference external" href="https://www.youtube.com/watch?v=BCwn26FePAo">https://www.youtube.com/watch?v=BCwn26FePAo</a></p></li>
<li><p>Top Gun Music using the DX7: <a class="reference external" href="https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/on-refait-le-son-de-top-gun.html">https://fr.audiofanzine.com/synthetiseur-rack/editorial/dossiers/on-refait-le-son-de-top-gun.html</a></p></li>
</ul>
</section>
</section>


              </article>
              

              
          </div>
          
      </div>
    </div>

  
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/pydata-sphinx-theme.js?digest=92025949c220c2e29695"></script>

<footer class="bd-footer"><div class="bd-footer__inner container">
  
  <div class="footer-item">
    <p class="copyright">
    &copy; Copyright 2022, V. Choqueuse.<br>
</p>
  </div>
  
  <div class="footer-item">
    <p class="sphinx-version">
Created using <a href="http://sphinx-doc.org/">Sphinx</a> 5.1.1.<br>
</p>
  </div>
  
</div>
</footer>
  </body>
</html>